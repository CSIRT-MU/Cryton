---
# This is a simple example of Step chaining.
# Required modules: command, medusa.

plan:
  name: Basic example
  owner: Cryton
  stages:
    - name: get-localhost-credentials
      trigger_type: delta
      trigger_args:
        seconds: 0
      steps:
        - name: check-ssh
          is_init: true
          step_type: worker/execute
          arguments:
            module: nmap
            module_arguments:
              target: {{ target.address }}
              ports:
                - 22
          next:
            - type: result
              value: ok
              step: bruteforce
        - name: bruteforce
          step_type: worker/execute
          arguments:
            module: medusa
            module_arguments:
              target: {{ target.address }}
              credentials:
                username: {{ target.username }}
                password: {{ target.password }}
